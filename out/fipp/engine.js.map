{"version":3,"file":"\/Users\/james\/projects\/cljs-draw\/out\/fipp\/engine.js","sources":["engine.cljc"],"lineCount":483,"mappings":"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","names":["method-table__5848__auto__","cljs.core\/atom","prefer-table__5849__auto__","method-cache__5850__auto__","cached-hierarchy__5851__auto__","hierarchy__5852__auto__","cljs.core\/get","cljs.core\/get-global-hierarchy","cljs.core\/MultiFn","cljs.core\/symbol","fipp.engine\/serialize-node","cljs.core\/first","fipp.engine\/serialize","doc","cljs.core\/seq?","cljs.core\/mapcat","serialize","cljs.core\/Keyword","cljs.core\/vector?","cljs.core\/ex-info","cljs.core\/-add-method","p__20370","vec__20371","cljs.core\/nth","cljs.core\/nthnext","_","text","cljs.core\/apply","cljs.core\/str","p__20372","vec__20373","p__20374","vec__20375","js\/Error","cljs.core\/pr-str","p__20376","vec__20377","children","p__20378","vec__20379","inline","or__4953__auto__","p__20383","vec__20384","cljs.core\/concat","p__20385","vec__20386","offset","p__20387","vec__20388","args","vec__20389","cljs.core\/cons","fipp.engine\/annotate-rights","rf","pos","cljs.core\/volatile!","res","node","delta","G__20391","cljs.core\/count","p","cljs.core\/-vreset!","cljs.core\/-deref","cljs.core\/assoc","argseq__5993__auto__","cljs.core\/IndexedSeq","js\/Array.prototype.slice","fipp.engine\/update-right","seq20394","G__20395","cljs.core\/next","G__20396","deque","f","fipp.deque\/conjr","cljs.core\/pop","cljs.core\/peek","p__20397","map__20401","cljs.core\/hash-map","fipp.engine\/annotate-begins","width","options","bufs","fipp.deque\/empty","p__20402","map__20403","op","right","cljs.core\/deref","buffers","cljs.core\/empty?","cljs.core\/=","position*","buffer","cljs.core\/vreset!","fipp.deque\/create","buffers*","begin","nodes","fipp.deque\/conjlr","cljs.core\/reduce","cljs.core\/update-in","fipp.deque\/concat","buffers**","fipp.deque\/popl","res*","p__20407","map__20412","fipp.engine\/format-nodes","fits","length","tab-stops","column","p__20413","map__20414","indent","G__20415","cljs.core\/repeat","cljs.core\/conj","x__5265__auto__","y__5266__auto__","fipp.engine\/pprint-document","document","cljs.core\/merge","cljs.core\/eduction","cljs.core\/run!","cljs.core\/print","cljs.core\/println"]}